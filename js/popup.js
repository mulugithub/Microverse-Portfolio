// create projectsDetails array object to store all of the information for all projects.
const projects = [
  {
    name: ['Tonic', 'Tonic'],
    description: [
      'A daily selection of privately personalized reads; no accounts or sign-ups required.',
      'A daily selection of privately personalized reads; no accounts or sign-ups required.',
    ],
    details: [
      ['Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essent'],
      ['Lorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it 1960s. Lorem Ipsum is simply dummy text of the printing and typesetting industry.', 'Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it 1960s with the releorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum han printer took a galley of type and scrambled it 1960s with the releawn printer took a galley of type and scrambled it 1960s.'],
    ],
    featured_images: [
      './images/Snapshoot Portfolio-mob-01.png',
      './images/Snapshoot Portfolio-desk-1.png',
    ],
    technologies: [
      ['html', 'css', 'JavaScript'], ['Ruby on rails', 'Ruby', 'Bootstrap'],
    ],
    client: ['CANOPY', 'CANOPY'],
    roles: ['./images/Counter.png', ['Back End Dev', 'Back End Dev'], ['2015', '2015']],
    liveLink: 'mulugithub.github.io/Microverse-Portfolio/',
    sourceLink: 'github.com/mulugithub/Microverse-Portfolio',
  },
  {
    name: ['Multi-Post Stories', 'Multi-Post Stories'],
    description: [
      'A daily selection of privately personalized reads; no accounts or sign-ups required.',
      'Experimental content creation feature that allows users to add to an existing story over the course of a day without spamming their friends.',
    ],
    details: [
      ['Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essent'],
      ['Lorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it 1960s. Lorem Ipsum is simply dummy text of the printing and typesetting industry.', 'Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it 1960s with the releorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum han printer took a galley of type and scrambled it 1960s with the releawn printer took a galley of type and scrambled it 1960s.'],
    ],
    featured_images: [
      './images/Snapshoot Portfolio-mob-02.png',
      './images/Snapshoot Portfolio-desk-2.png',
    ],
    technologies: [
      ['html', 'css', 'JavaScript'], ['Ruby on rails', 'Ruby', 'Bootstrap'],
    ],
    client: ['CANOPY', 'FACEBOOK'],
    roles: ['./images/Counter.png', ['Back End Dev', 'Full Stack Dev'], ['2015', '2015']],
    liveLink: 'mulugithub.github.io/Microverse-Portfolio/',
    sourceLink: 'github.com/mulugithub/Microverse-Portfolio',
  },
  {
    name: ['Tonic', 'Facebook 360'],
    description: [
      'A daily selection of privately personalized reads; no accounts or sign-ups required.',
      "Exploring the future of media in Facebook's first Virtual Reality app; a place to discover and enjoy 360 photos and videos on Gear VR.",
    ],
    details: [
      ['Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essent'],
      ['Lorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it 1960s. Lorem Ipsum is simply dummy text of the printing and typesetting industry.', 'Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it 1960s with the releorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum han printer took a galley of type and scrambled it 1960s with the releawn printer took a galley of type and scrambled it 1960s.'],
    ],
    featured_images: [
      './images/Snapshoot Portfolio-mob-03.png',
      './images/Snapshoot Portfolio-desk-3.png',
    ],
    technologies: [
      ['html', 'css', 'JavaScript'], ['Ruby on rails', 'Ruby', 'Bootstrap'],
    ],
    client: ['CANOPY', 'FACEBOOK'],
    roles: ['./images/Counter.png', ['Back End Dev', 'Full Stack Dev'], ['2015', '2015']],
    liveLink: 'mulugithub.github.io/Microverse-Portfolio/',
    sourceLink: 'github.com/mulugithub/Microverse-Portfolio',
  },
  {
    name: ['Multi-Post Stories', 'Uber Navigation'],
    description: [
      "A daily selection of privately personalized reads; no accounts or sign-ups required. has been the industry's standard dummy text ever since the 1500s.",
      'A smart assistant to make driving more safe, efficient, and fun by unlocking your most expensive computer: your car.',
    ],
    details: [
      ['Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essent'],
      ['Lorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it 1960s. Lorem Ipsum is simply dummy text of the printing and typesetting industry.', 'Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it 1960s with the releorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum han printer took a galley of type and scrambled it 1960s with the releawn printer took a galley of type and scrambled it 1960s.'],
    ],
    featured_images: [
      './images/Snapshoot Portfolio-mob-04.png',
      './images/Snapshoot Portfolio-desk-4.png',
    ],
    technologies: [
      ['html', 'css', 'JavaScript'], ['Ruby on rails', 'Ruby', 'Bootstrap'],
    ],
    client: ['CANOPY', 'Uber'],
    roles: ['./images/Counter.png', ['Back End Dev', 'Lead Developer'], ['2015', '2018']],
    liveLink: 'mulugithub.github.io/Microverse-Portfolio/',
    sourceLink: 'github.com/mulugithub/Microverse-Portfolio',
  },
];

// Get the <body> element
const body = document.querySelector('body');

// Get the <main> and <header> elements
const main = document.querySelector('main');

// Insert the <main> element after the <header> element in the <body> element
body.insertBefore(main, body.children[1]);

// Create a new empty <section> element after the headline section in the <main> element
const workSection = document.createElement('section');
workSection.setAttribute('id', 'portfolio');
workSection.setAttribute('class', 'works-section');

// Insert the new <section> element after the headline section in the <main> element
main.insertBefore(workSection, main.children[1]);

// Create projectCards dynamically using the information in the projects array
projects.forEach((project, index) => {
  const projectCards = document.createElement('div');
  projectCards.setAttribute('class', 'cards-container');
  projectCards.classList.add('project');
  projectCards.innerHTML = `
    <img class='snapshoot-portfolio mobile' src="${project.featured_images[0]}" alt="${project.name[0]}">
    <img class='snapshoot-portfolio desktop' src="${project.featured_images[1]}" alt="${project.name[1]}">
    <div class="left-block">
      <h1 class="project-title mobile">${project.name[0]}</h1>
      <h1 class="project-title desktop">${project.name[0]}</h1>
      <ul class="project-detail">
        <li class="card-client mobile">${project.client[0]}</li>
        <li class="card-client desktop">${project.client[1]}</li>
        <li class="card-role"><img src=" ${project.roles[0]}" alt="counter" /></li>
        <li class="card-role mobile"> ${project.roles[1][0]}</li>
        <li class="card-role desktop">${project.roles[1][1]}</li>
        <li class="card-role"><img src="${project.roles[0]}" alt="counter" /></li>
        <li class="card-role mobile">${project.roles[2][0]}</li>
        <li class="card-role desktop">${project.roles[2][1]}</li>
      </ul>
      <p class="description mobile">${project.description[0]}</p>
      <p class="description desktop">${project.description[1]}</p>
      <ul class="tags">
        <li class="tags-button mobile">${project.technologies[0][0]}</li>
        <li class="tags-button desktop">${project.technologies[1][0]}</li>
        <li class="tags-button mobile">${project.technologies[0][1]}</li>
        <li class="tags-button mobile">${project.technologies[0][2]}</li>
      </ul>
      <button type="button" class="project-action" data-project-id="${index}">See Project</button>
    </div>
  `;
  // Add generated project cards to the works section of the page
  workSection.appendChild(projectCards);
});

// select and  hide  the second li item from the class tags for desktop version
const hideSecondTechnology = document.querySelector('.left-block .tags li:nth-child(2)');
hideSecondTechnology.style.display = 'none';

// Get the popup-modal-container class
const popupModal = document.querySelector('.popup-modal-container');
const overlay = document.querySelector('.overlay');

const closeModal = () => {
  popupModal.classList.toggle('hide');
  overlay.classList.toggle('hide');
  body.style.overflow = 'auto';
};

const showModal = () => {
  popupModal.classList.toggle('hide');
  overlay.classList.toggle('hide');
  body.style.overflow = 'hidden';
};

// Define functions to show the popup modal
function showPopupModal(projectId) {
  popupModal.innerHTML = `
  <div class='modal-header'>
   <h2 class="project-title mobile" >${projects[projectId].name[0]}</h2>
   <h2 class="project-title desktop">${projects[projectId].name[1]}</h2>
   <a class='close-modal'>&times; </a>
  </div>
  <div class='modal-content'>
    <ul class="project-detail">
      <li class="card-client mobile">${projects[projectId].client[0]}</li>
      <li class="card-client desktop">${projects[projectId].client[1]}</li>
      <li class="card-role"><img src=" ${projects[projectId].roles[0]}" alt="counter" /></li>
      <li class="card-role mobile"> ${projects[projectId].roles[1][0]}</li>
      <li class="card-role desktop">${projects[projectId].roles[1][1]}</li>
      <li class="card-role"><img src="${projects[projectId].roles[0]}" alt="counter" /></li>
      <li class="card-role mobile">${projects[projectId].roles[2][0]}</li>
      <li class="card-role desktop">${projects[projectId].roles[2][1]}</li>
    </ul>
  
    <div class='snapshoot-popup mobile'> <img src="${projects[projectId].featured_images[0]}" alt="${projects[projectId].name[0]}"></div>
    <div class='snapshoot-popup desktop'> <img src="${projects[projectId].featured_images[1]}" alt="${projects[projectId].name[1]}"></div>
    
    <div class="description-container">
    <div class="popup-left">
    <p class="description mobile">${projects[projectId].details[0]}</p>
    <p class="description desktop">${projects[projectId].details[1][0]}</p>
    <p class="description desktop">${projects[projectId].details[1][1]}</p>
    </div>
    <div class="popup-right">
    <ul class="tags">
      <li class="tags-button mobile">${projects[projectId].technologies[0][0]}</li>
      <li class="tags-button mobile">${projects[projectId].technologies[0][1]}</li>
      <li class="tags-button mobile">${projects[projectId].technologies[0][2]}</li>
      <li class="tags-button desktop">${projects[projectId].technologies[1][1]}</li>
      <li class="tags-button desktop">${projects[projectId].technologies[1][2]}</li>
    </ul>

    <img src="images/divider-mobile-modal.png" alt="divider image for mobile popup">
    
    <div class="live-source">
    <a class='live-soucre-btn' href='https://${projects[projectId].liveLink}' target='_blank'>See Live <img src='./images/Icon-Live.png' alt='Live link icon'></a>
    <a class='live-soucre-btn' href='https://${projects[projectId].sourceLink}' target='_blank'>See Source <img src='./images/Icon-GitHub.png' alt='Github icon'></a>
    </div>
    </div>

    </div>
    </div>
  `;
}

const projectDetailClickHandler = (projectId) => {
  showPopupModal(projectId);
  showModal();
  document.querySelector('.close-modal').addEventListener('click', closeModal);
};

const popupBtns = document.querySelectorAll('.project-action');
popupBtns.forEach((btn) => {
  const projectId = btn.getAttribute('data-project-id');
  btn.addEventListener('click', () => projectDetailClickHandler(projectId));
});

overlay.addEventListener('click', closeModal);